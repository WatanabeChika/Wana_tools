import{_ as _export_sfc,r as ref,o as onMounted,a as openBlock,c as createElementBlock,b as createBaseVNode,F as Fragment,d as renderList,t as toDisplayString,e as withDirectives,f as vModelText,q as withKeys,n as normalizeClass,i as createCommentVNode,A as normalizeStyle,p as pushScopeId,g as popScopeId}from"./index-c4319674.js";const _24points_vue_vue_type_style_index_0_scoped_0d1d7fc1_lang="",_withScopeId=l=>(pushScopeId("data-v-0d1d7fc1"),l=l(),popScopeId(),l),_hoisted_1={class:"game-container"},_hoisted_2=_withScopeId(()=>createBaseVNode("h1",null,"24点游戏",-1)),_hoisted_3=_withScopeId(()=>createBaseVNode("p",{style:{"margin-bottom":"10px","margin-top":"0px"}},"使用下面的四个数，通过四则运算得到24",-1)),_hoisted_4=_withScopeId(()=>createBaseVNode("p",{style:{"margin-bottom":"10px","margin-top":"0px"}},"游戏规则：使用四个数（无顺序），通过加(+)、减(-)、乘(×或*)、除(÷或/)和括号，使表达式值等于24",-1)),_hoisted_5={class:"numbers-container"},_hoisted_6=["onMouseenter"],_hoisted_7={class:"input-container"},_hoisted_8=["disabled"],_hoisted_9={class:"no-solution-container"},_hoisted_10=_withScopeId(()=>createBaseVNode("span",null,"无解（这组数字无法计算出24）",-1)),_hoisted_11={key:0,class:"result-container"},_hoisted_12={key:1,class:"solution-container"},_hoisted_13=_withScopeId(()=>createBaseVNode("div",{class:"solution-title"},"可能的解法：",-1)),_hoisted_14={key:0,class:"solution-list"},_hoisted_15={key:1,class:"no-solution-text"},_sfc_main={__name:"24points",setup(__props){function judgePoint24(l){const o=new Map,u=new Set;function v(e){if(e.length===1){if(Math.abs(e[0].value-24)<1e-6){const a=e[0].expr,d=a.startsWith("(")&&a.endsWith(")")?a.slice(1,-1):a,i=_(e[0]);o.has(i)||(o.set(i,!0),u.add(d))}return}const n=e.length;for(let a=0;a<n;a++)for(let d=a+1;d<n;d++){const i=[];for(let p=0;p<n;p++)p!==a&&p!==d&&i.push(e[p]);const t=e[a],s=e[d],c=[],S=`(${t.expr} + ${s.expr})`,x=t.value+s.value;c.push({value:x,expr:S,left:t,op:"+",right:s}),c.push({value:t.value-s.value,expr:`(${t.expr} - ${s.expr})`,left:t,op:"-",right:s}),c.push({value:s.value-t.value,expr:`(${s.expr} - ${t.expr})`,left:s,op:"-",right:t});let f=t.expr,m=s.expr;h(t,s)&&([f,m]=[m,f]);const N=`(${f} * ${m})`;c.push({value:t.value*s.value,expr:N,left:h(t,s)?s:t,op:"*",right:h(t,s)?t:s}),Math.abs(s.value)>1e-6&&c.push({value:t.value/s.value,expr:`(${t.expr} / ${s.expr})`,left:t,op:"/",right:s}),Math.abs(t.value)>1e-6&&c.push({value:s.value/t.value,expr:`(${s.expr} / ${t.expr})`,left:s,op:"/",right:t});for(const p of c)i.push(p),v(i),i.pop()}}function h(e,n){return Math.abs(e.value-n.value)>1e-6?e.value>n.value:e.expr!==n.expr?e.expr>n.expr:!1}function _(e){if(!e.left&&!e.right)return e.value.toString();const n=_(e.left),a=_(e.right);return e.op==="+"||e.op==="*"?[e.op,n<a?n+a:a+n].join(":"):[e.op,n,a].join(":")}const g=l.map(e=>({value:e,expr:e.toString()}));return v(g),{isValid:u.size>0,solutions:Array.from(u)}}const numbers=ref([]),userInput=ref(""),isNoSolution=ref(!1),resultMessage=ref(""),resultStatus=ref(""),solutions=ref([]),showSolution=ref(!1),cardHover=ref(-1);function generateNumbers(){const l=[];for(let o=0;o<4;o++)l.push(Math.floor(Math.random()*13)+1);numbers.value=l;const r=judgePoint24([...l]);solutions.value=r.solutions}function checkAnswer(){var l;if(resultMessage.value="",resultStatus.value="",showSolution.value=!1,isNoSolution.value){solutions.value.length===0?(resultMessage.value="✓ 正确！这组数字确实无解",resultStatus.value="correct"):(resultMessage.value="✗ 错误！这组数字有解法",resultStatus.value="incorrect");return}if(!userInput.value.trim()){resultMessage.value='请输入算式或选择"无解"',resultStatus.value="incorrect";return}try{const sanitizedInput=userInput.value.replace(/×/g,"*").replace(/÷/g,"/"),inputNumbers=((l=sanitizedInput.match(/\d+/g))==null?void 0:l.map(Number))||[],sortedInput=[...inputNumbers].sort((r,o)=>r-o).join(","),sortedOriginal=[...numbers.value].sort((r,o)=>r-o).join(",");if(sortedInput!==sortedOriginal){resultMessage.value="✗ 错误！请使用给定的四个数字",resultStatus.value="incorrect";return}const result=eval(sanitizedInput);Math.abs(result-24)<1e-6?(resultMessage.value="✓ 正确！算式计算结果为24",resultStatus.value="correct"):(resultMessage.value=`✗ 错误！算式计算结果为${result.toFixed(2)}，不是24`,resultStatus.value="incorrect")}catch(r){resultMessage.value="✗ 无效的算式，请重新输入",resultStatus.value="incorrect"}}function showSolutions(){showSolution.value=!0,resultMessage.value="",resultStatus.value=""}function resetGame(){generateNumbers(),userInput.value="",isNoSolution.value=!1,resultMessage.value="",resultStatus.value="",showSolution.value=!1}function toggleNoSolution(){isNoSolution.value=!isNoSolution.value,isNoSolution.value&&(userInput.value="")}return onMounted(()=>{generateNumbers()}),(l,r)=>(openBlock(),createElementBlock("div",_hoisted_1,[_hoisted_2,_hoisted_3,_hoisted_4,createBaseVNode("div",_hoisted_5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(numbers.value,(o,u)=>(openBlock(),createElementBlock("div",{class:"number-card",key:u,onMouseenter:v=>cardHover.value=u,onMouseleave:r[0]||(r[0]=v=>cardHover.value=-1)},toDisplayString(o),41,_hoisted_6))),128))]),createBaseVNode("div",_hoisted_7,[withDirectives(createBaseVNode("input",{type:"text",class:"input-box","onUpdate:modelValue":r[1]||(r[1]=o=>userInput.value=o),placeholder:"请输入算式，例如：(8-2)×(9-5)",disabled:isNoSolution.value,onKeyup:withKeys(checkAnswer,["enter"])},null,40,_hoisted_8),[[vModelText,userInput.value]])]),createBaseVNode("div",_hoisted_9,[createBaseVNode("div",{class:"checkbox-label",onClick:toggleNoSolution},[createBaseVNode("div",{class:normalizeClass(["checkbox-custom",{checked:isNoSolution.value}])},null,2),_hoisted_10])]),createBaseVNode("div",{class:"button-container"},[createBaseVNode("button",{class:"btn btn-primary",onClick:checkAnswer},"验证答案 "),createBaseVNode("button",{class:"btn btn-secondary",onClick:showSolutions},"查看答案 "),createBaseVNode("button",{class:"btn btn-warning",onClick:resetGame},"重新开始 ")]),resultMessage.value?(openBlock(),createElementBlock("div",_hoisted_11,[createBaseVNode("div",{class:normalizeClass({"result-correct":resultStatus.value==="correct","result-incorrect":resultStatus.value==="incorrect"})},toDisplayString(resultMessage.value),3)])):createCommentVNode("",!0),showSolution.value?(openBlock(),createElementBlock("div",_hoisted_12,[_hoisted_13,solutions.value.length>0?(openBlock(),createElementBlock("ul",_hoisted_14,[(openBlock(!0),createElementBlock(Fragment,null,renderList(solutions.value,(o,u)=>(openBlock(),createElementBlock("li",{class:"solution-item",key:u,style:normalizeStyle({animationDelay:`${u*.05}s`})},toDisplayString(o)+" = 24 ",5))),128))])):(openBlock(),createElementBlock("div",_hoisted_15," 这组数字无解！ "))])):createCommentVNode("",!0)]))}},_24points=_export_sfc(_sfc_main,[["__scopeId","data-v-0d1d7fc1"]]);export{_24points as default};
