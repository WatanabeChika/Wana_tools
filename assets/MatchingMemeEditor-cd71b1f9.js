import{_ as J,r as i,o as Q,a as r,c as d,b as n,F as x,d as L,t as C,n as Z,e as T,v as M,i as S,p as ee,g as te,h as H}from"./index-77b1bc84.js";import{F as ae,f as I,l as N,s as le}from"./utils-0b72f588.js";import{L as ne,a as oe,b as se,c as ce}from"./data-ca991437.js";import"./_commonjsHelpers-de833af9.js";const m=E=>(ee("data-v-2548f3ce"),E=E(),te(),E),ie={class:"page-container"},re=m(()=>n("h1",null,"LoveLive!连线梗图制作器",-1)),de={id:"input-container"},ue={id:"modes-settings"},he=m(()=>n("span",{id:"matching-hint"},"主题选择: ",-1)),ve={class:"radio-group"},fe=["checked","value","id","onChange"],ge=["for"],_e={class:"character-grid"},ke=["onClick"],pe={id:"modes-settings"},be=m(()=>n("span",{id:"matching-hint"},"快捷选项: ",-1)),me={class:"checkbox-group"},ye=["onUpdate:modelValue","id"],we=["for"],xe=["onUpdate:modelValue","id"],Le=["for"],Ce=["onUpdate:modelValue","id"],Ie=["for"],Ue={key:0,id:"modes-settings"},Ve=m(()=>n("span",{id:"matching-hint"},"难度调整: ",-1)),Ee=m(()=>n("label",{for:"black-and-white"},"黑白图标",-1)),Fe={id:"canvas-container"},Te=m(()=>n("div",{id:"notice"},[n("p",null,"注意：某些角色数据有相应缺失，选择时会做提醒。"),n("p",null,[H("应援色和生日数据来源： "),n("a",{href:"https://llwiki.org/"},"LLWiki")]),n("p",null,[H("瞳色数据来源： "),n("a",{href:"https://twitter.com/makoteau/status/1704457996808437882"},"@makoteau")])],-1)),W="KaiTi",U="images/",Me="white",V="black",Se="连线题：",$e="请将各角色连至其对应的",Re={__name:"MatchingMemeEditor",setup(E){const u=i(null),F=i(null),$=i(!0),y=i(!1),g=i(!1),_=i(!1),R=i(!1),O=new ae("KaiTi"),A=`bold 50px ${W}`,j=`35px ${W}`,k=i(ne),p=i(oe),b=i(se),c=i(ce),h=i([{name:"应援色",mark:$},{name:"生日",mark:y},{name:"图标",mark:g},{name:"瞳色",mark:_}]);let s,v,D,f=U+"characters/";async function K(){let a=[];for(let l=0;l<c.value.length;l++)c.value[l].checked&&a.push(c.value[l]);u.value.height=D+a.length*175+50,F.value.height=D+a.length*175+50,s.fillStyle=Me,s.fillRect(0,0,u.value.width,u.value.height),I(s,V,A,!1,520,60,Se),I(s,V,A,!1,410,135,$e);for(let l=0;l<h.value.length;l++)if(h.value[l].mark){I(s,V,A,!1,760,135,h.value[l].name);break}const e=170,t=300;for(let l=0;l<a.length;l++)if(_.value)I(s,V,j,!1,e-30,t+l*175,a[l].label);else{const w=await N(f+a[l].Eng+".png");s.drawImage(w,e-80,t+l*175-70,130,130)}const[o,B]=le(a,!0);if($.value)for(let l=0;l<o.length;l++)s.fillStyle=o[l].color,s.fillRect(e+570,t+l*175-50,180,100);else if(y.value)for(let l=0;l<o.length;l++)I(s,V,j,!1,e+640,t+l*175,o[l].birthday);else if(g.value){f=U+"character_icons/";for(let l=0;l<o.length;l++){const w=await N(f+o[l].Eng+".png");R.value&&(s.filter="grayscale(100%)"),s.drawImage(w,e+570,t+l*175-70,130,130),s.filter="none"}f=U+"characters/"}else if(_.value){f=U+"eye_color/";for(let l=0;l<o.length;l++){const w=await N(f+o[l].Eng+".png");s.drawImage(w,e+570,t+l*175-70,130,130)}f=U+"characters/"}s.fillStyle="#999",s.font=`14px ${W}`,s.textAlign="right",s.fillText("Created by Wanakachi",u.value.width-8,u.value.height-10),v.drawImage(u.value,0,0);for(let l=0;l<B.length;l++)v.beginPath(),v.moveTo(e+75,t+B[l][0]*175),v.lineTo(e+550,t+B[l][1]*175),v.strokeStyle="black",v.lineWidth=3,v.stroke()}function X(){const a=u.value.toDataURL("image/png"),e=document.createElement("a");e.href=a,e.download="连线题.png",e.click()}function Y(){const a=F.value.toDataURL("image/png"),e=document.createElement("a");e.href=a,e.download="答案.png",e.click()}Q(async()=>{try{await Promise.all([O.check()]),s=u.value.getContext("2d"),v=F.value.getContext("2d"),D=u.value.height,K()}catch(a){console.error(a)}});const z=()=>{for(let a=0;a<c.value.length;a++)c.value[a].checked=!1;for(let a=0;a<p.value.length;a++)p.value[a].checked=!1;for(let a=0;a<b.value.length;a++)b.value[a].checked=!1;for(let a=0;a<k.value.length;a++)k.value[a].checked=!1},P=a=>{for(let e=0;e<c.value.length;e++)c.value[e].checked=!1;for(let e=0;e<a.length;e++)if(a[e].checked)for(let t=0;t<a[e].char.length;t++){const o=a[e].char[t];y.value&&c.value[o].birthday=="暂无"||g.value&&!c.value[o].icon||_.value&&!c.value[o].eye||(c.value[o].checked=!0)}},q=a=>{for(let e=0;e<h.value.length;e++)h.value[e].name!=a.name?h.value[e].mark=!1:h.value[e].mark=!0;z()},G=a=>{for(let e=0;e<p.value.length;e++)p.value[e].checked=!1;for(let e=0;e<b.value.length;e++)b.value[e].checked=!1;for(let e=0;e<k.value.length;e++)k.value[e].checked=!1;if(y.value&&a.birthday=="暂无"){alert("该角色暂无生日信息！");return}if(g.value&&!a.icon){alert("该角色暂无图标信息！");return}if(_.value&&!a.eye){alert("该角色暂无瞳色信息！");return}a.checked=!a.checked};return(a,e)=>(r(),d("div",ie,[re,n("div",de,[n("div",ue,[he,n("div",ve,[(r(!0),d(x,null,L(h.value,t=>(r(),d("div",{key:t.name,class:"radio-item"},[n("input",{type:"radio",name:"check",checked:t.mark,value:t.mark,id:t.name,onChange:o=>q(t)},null,40,fe),n("label",{for:t.name},C(t.name),9,ge)]))),128))])]),n("div",_e,[(r(!0),d(x,null,L(c.value,t=>(r(),d("div",{key:t.label,class:Z(["grid-item",{character_selected:t.checked}]),onClick:o=>G(t)},C(t.label),11,ke))),128))]),n("div",pe,[be,n("div",me,[$.value?(r(!0),d(x,{key:0},L(p.value,t=>(r(),d("div",{key:t.label,class:"checkbox-item"},[T(n("input",{"onUpdate:modelValue":o=>t.checked=o,type:"checkbox",id:t.label,onChange:e[0]||(e[0]=o=>P(p.value))},null,40,ye),[[M,t.checked]]),n("label",{for:t.label},C(t.label),9,we)]))),128)):S("",!0),y.value?(r(!0),d(x,{key:1},L(b.value,t=>(r(),d("div",{key:t.label,class:"checkbox-item"},[T(n("input",{"onUpdate:modelValue":o=>t.checked=o,type:"checkbox",id:t.label,onChange:e[1]||(e[1]=o=>P(b.value))},null,40,xe),[[M,t.checked]]),n("label",{for:t.label},C(t.label),9,Le)]))),128)):S("",!0),_.value||g.value?(r(!0),d(x,{key:2},L(k.value,t=>(r(),d("div",{key:t.label,class:"checkbox-item"},[T(n("input",{"onUpdate:modelValue":o=>t.checked=o,type:"checkbox",id:t.label,onChange:e[2]||(e[2]=o=>P(k.value))},null,40,Ce),[[M,t.checked]]),n("label",{for:t.label},C(t.label),9,Ie)]))),128)):S("",!0)])]),g.value?(r(),d("div",Ue,[Ve,n("div",null,[T(n("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>R.value=t),type:"checkbox",id:"black-and-white"},null,512),[[M,R.value]]),Ee])])):S("",!0),n("div",{id:"button-container"},[n("button",{onClick:K,class:"btns primary-btn"},"绘制图片"),n("button",{onClick:z,class:"btns reset-btn"},"清空选择"),n("button",{onClick:X,class:"btns download-btn"},"下载图片"),n("button",{onClick:Y,class:"btns download-btn"},"下载答案")])]),n("div",Fe,[n("canvas",{id:"art-canvas",ref_key:"canvas",ref:u,width:"1000",height:"200"},null,512),n("canvas",{id:"art-canvas-ans",ref_key:"canvas_ans",ref:F,width:"1000",height:"200",style:{display:"none"}},null,512)]),Te]))}},Ne=J(Re,[["__scopeId","data-v-2548f3ce"]]);export{Ne as default};
