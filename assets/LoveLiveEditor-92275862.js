import{_ as O,r as f,o as z,w as k,a as y,c as S,b as l,F as T,d as N,t as $,e as I,v as P,f as E,u as U,p as q,g as A,h as G}from"./index-45cb2c60.js";import{F as V,g as F,f as v}from"./utils-c2507c24.js";const L=b=>(q("data-v-0228ef8e"),b=b(),A(),b),H=L(()=>l("h1",null,"LoveLive!风格Logo生成器",-1)),J={id:"canvas-container"},K={id:"input-container"},Q={id:"canvas-settings"},X=["for"],Y=["onUpdate:modelValue","id"],Z=L(()=>l("br",null,null,-1)),ee=["placeholder"],te=L(()=>l("br",null,null,-1)),ae=["placeholder"],le=L(()=>l("br",null,null,-1)),oe=L(()=>l("div",{id:"notice"},[l("p",null,"注意：输入文字过长会导致图片崩坏。"),l("p",null,[G("使用字体：Lido Bold Italic、FF Magda Clean Mono。无中文fallback字体。参考： "),l("a",{href:"https://zhuanlan.zhihu.com/p/20356949"},"链接")])],-1)),g="bold italic 120px LIST",m="30px FFMC",M="32px FFMC",ne={__name:"LoveLiveEditor",setup(b){const e=f(null),c=f(""),d=f(""),r=f(!1),_=f(!1),x=f(!1),s=f(!1),W=new V("LIST"),j=new V("FFMC"),B=f([{name:"透明背景",mark:r},{name:"下排居中",mark:_},{name:"互换底色",mark:x},{name:"文字描边",mark:s}]);let h="LoveLive!",u="School idol project",a,C,p,t;function w(){a=e.value.getContext("2d");const n=F(c.value||h,g),o=F(d.value||u,m);if(n>C-36||o>C/2+n/2-36?e.value.width=Math.max(n+36,(o+36-n/2)*2):e.value.width=C,a.fillStyle=p,a.fillRect(0,0,e.value.width,e.value.height),!r.value&&x.value&&s.value){const i=t;t=p,v(a,t,g,s.value,e.value.width/2,e.value.height/2-30,c.value||h),_.value?v(a,t,M,s.value,e.value.width/2,e.value.height/2+40,d.value||u):v(a,t,m,s.value,e.value.width/2+n/2-o/2,e.value.height/2+40,d.value||u),t=i}else if(r.value&&x.value){const i=t;t="blue",a.globalCompositeOperation="destination-out",v(a,t,g,s.value,e.value.width/2,e.value.height/2-30,c.value||h),_.value?v(a,t,M,s.value,e.value.width/2,e.value.height/2+40,d.value||u):v(a,t,m,s.value,e.value.width/2+n/2-o/2,e.value.height/2+40,d.value||u),a.globalCompositeOperation="source-over",t=i}else v(a,t,g,s.value,e.value.width/2,e.value.height/2-30,c.value||h),_.value?v(a,t,M,s.value,e.value.width/2,e.value.height/2+40,d.value||u):v(a,t,m,s.value,e.value.width/2+n/2-o/2,e.value.height/2+40,d.value||u)}function R(){const n=e.value.toDataURL(r.value?"image/png":"image/jpeg"),o=document.createElement("a");o.href=n,o.download=r.value?`${c.value||h}.png`:`${c.value||h}.jpg`,o.click()}return z(async()=>{try{await Promise.all([W.check(),j.check()]),a=e.value.getContext("2d"),C=e.value.width,p="white",t="#E4007F",a.fillStyle=p,a.fillRect(0,0,e.value.width,e.value.height);const n=F(h,g),o=F(u,m);v(a,t,g,!1,e.value.width/2,e.value.height/2-30,h),v(a,t,m,!1,e.value.width/2+n/2-o/2,e.value.height/2+40,u)}catch(n){console.error(n)}}),k([c,d],()=>{w()}),k(r,()=>{x.value?r.value?t="transparent":t="white":r.value?p="transparent":p="white",w()}),k(_,()=>{_.value?u="School idol project series":u="School idol project",w()}),k(x,()=>{[p,t]=[t,p],w()}),k(s,()=>{w()}),(n,o)=>(y(),S(T,null,[H,l("div",J,[l("canvas",{id:"art-canvas",ref_key:"canvas",ref:e,width:"1000",height:"500"},null,512)]),l("div",K,[l("div",Q,[(y(!0),S(T,null,N(B.value,i=>(y(),S("div",{key:i.name},[l("label",{for:i.name},$(i.name),9,X),I(l("input",{"onUpdate:modelValue":D=>i.mark=D,type:"checkbox",id:i.name},null,8,Y),[[P,i.mark]])]))),128))]),Z,I(l("input",{"onUpdate:modelValue":o[0]||(o[0]=i=>c.value=i),type:"text",id:"text-input1",placeholder:U(h)},null,8,ee),[[E,c.value]]),te,I(l("input",{"onUpdate:modelValue":o[1]||(o[1]=i=>d.value=i),type:"text",id:"text-input2",placeholder:U(u)},null,8,ae),[[E,d.value]]),le,l("button",{onClick:R,id:"download-btn"},"下载图片")]),oe],64))}},ue=O(ne,[["__scopeId","data-v-0228ef8e"]]);export{ue as default};
