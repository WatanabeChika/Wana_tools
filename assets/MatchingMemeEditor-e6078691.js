import{_ as Q,r as d,o as Z,a as c,c as i,b as n,F as g,d as y,t as C,n as ee,e as M,v as S,i as $,p as te,g as ae,h as z}from"./index-67ec0f25.js";import{F as le,f as I,l as N,s as ne}from"./utils-4b240ca0.js";import{L as oe,a as se,b as ce,c as ie}from"./data-ca991437.js";import"./_commonjsHelpers-de833af9.js";const w=E=>(te("data-v-2915ef73"),E=E(),ae(),E),re=w(()=>n("h1",null,"LoveLive!连线梗图制作器",-1)),de={id:"input-container"},ue={id:"modes-settings"},he=w(()=>n("span",{id:"matching-hint"},"主题选择: ",-1)),ve=["for"],fe=["checked","value","id","onChange"],ge=["onClick"],ke={id:"modes-settings"},_e=w(()=>n("span",{id:"matching-hint"},"快捷选项: ",-1)),pe=["for"],be=["onUpdate:modelValue","id"],me=["for"],ye=["onUpdate:modelValue","id"],we=["for"],xe=["onUpdate:modelValue","id"],Le={key:0,id:"modes-settings"},Ce=w(()=>n("span",{id:"matching-hint"},"难度调整: ",-1)),Ie=w(()=>n("label",{for:"black-and-white"},"黑白图标",-1)),Ue={id:"canvas-container"},Ve=w(()=>n("div",{id:"notice"},[n("p",null,"注意：某些角色数据有相应缺失，选择时会做提醒。"),n("p",null,[z("应援色和生日数据来源： "),n("a",{href:"https://llwiki.org/"},"LLWiki")]),n("p",null,[z("瞳色数据来源： "),n("a",{href:"https://twitter.com/makoteau/status/1704457996808437882"},"@makoteau")])],-1)),W="KaiTi",U="images/",Ee="white",V="black",Fe="连线题：",Te="请将各角色连至其对应的",Me={__name:"MatchingMemeEditor",setup(E){const u=d(null),F=d(null),R=d(!0),x=d(!1),k=d(!1),_=d(!1),A=d(!1),H=new le("KaiTi"),D=`bold 50px ${W}`,j=`35px ${W}`,p=d(oe),b=d(se),m=d(ce),r=d(ie),h=d([{name:"应援色",mark:R},{name:"生日",mark:x},{name:"图标",mark:k},{name:"瞳色",mark:_}]);let s,v,P,f=U+"characters/";async function K(){let t=[];for(let l=0;l<r.value.length;l++)r.value[l].checked&&t.push(r.value[l]);u.value.height=P+t.length*175+50,F.value.height=P+t.length*175+50,s.fillStyle=Ee,s.fillRect(0,0,u.value.width,u.value.height),I(s,V,D,!1,520,60,Fe),I(s,V,D,!1,410,135,Te);for(let l=0;l<h.value.length;l++)if(h.value[l].mark){I(s,V,D,!1,760,135,h.value[l].name);break}const e=170,a=300;for(let l=0;l<t.length;l++)if(_.value)I(s,V,j,!1,e-30,a+l*175,t[l].label);else{const L=await N(f+t[l].Eng+".png");s.drawImage(L,e-80,a+l*175-70,130,130)}const[o,T]=ne(t);if(R.value)for(let l=0;l<o.length;l++)s.fillStyle=o[l].color,s.fillRect(e+570,a+l*175-50,180,100);else if(x.value)for(let l=0;l<o.length;l++)I(s,V,j,!1,e+640,a+l*175,o[l].birthday);else if(k.value){f=U+"character_icons/";for(let l=0;l<o.length;l++){const L=await N(f+o[l].Eng+".png");A.value&&(s.filter="grayscale(100%)"),s.drawImage(L,e+570,a+l*175-70,130,130),s.filter="none"}f=U+"characters/"}else if(_.value){f=U+"eye_color/";for(let l=0;l<o.length;l++){const L=await N(f+o[l].Eng+".png");s.drawImage(L,e+570,a+l*175-70,130,130)}f=U+"characters/"}s.fillStyle="#999",s.font=`14px ${W}`,s.textAlign="right",s.fillText("Created by Wanakachi",u.value.width-8,u.value.height-10),v.drawImage(u.value,0,0);for(let l=0;l<T.length;l++)v.beginPath(),v.moveTo(e+75,a+T[l][0]*175),v.lineTo(e+550,a+T[l][1]*175),v.strokeStyle="black",v.lineWidth=3,v.stroke()}function X(){const t=u.value.toDataURL("image/png"),e=document.createElement("a");e.href=t,e.download="连线题.png",e.click()}function Y(){const t=F.value.toDataURL("image/png"),e=document.createElement("a");e.href=t,e.download="答案.png",e.click()}Z(async()=>{try{await Promise.all([H.check()]),s=u.value.getContext("2d"),v=F.value.getContext("2d"),P=u.value.height,K()}catch(t){console.error(t)}});const O=()=>{for(let t=0;t<r.value.length;t++)r.value[t].checked=!1;for(let t=0;t<b.value.length;t++)b.value[t].checked=!1;for(let t=0;t<m.value.length;t++)m.value[t].checked=!1;for(let t=0;t<p.value.length;t++)p.value[t].checked=!1},B=t=>{for(let e=0;e<r.value.length;e++)r.value[e].checked=!1;for(let e=0;e<t.length;e++)if(t[e].checked)for(let a=0;a<t[e].char.length;a++){const o=t[e].char[a];x.value&&r.value[o].birthday=="暂无"||k.value&&!r.value[o].icon||_.value&&!r.value[o].eye||(r.value[o].checked=!0)}},q=t=>{for(let e=0;e<h.value.length;e++)h.value[e].name!=t.name?h.value[e].mark=!1:h.value[e].mark=!0;O()},G=()=>{const t=[];for(let e=0;e<r.value.length;e+=7)t.push(r.value.slice(e,e+7));return t},J=t=>{for(let e=0;e<b.value.length;e++)b.value[e].checked=!1;for(let e=0;e<m.value.length;e++)m.value[e].checked=!1;for(let e=0;e<p.value.length;e++)p.value[e].checked=!1;if(x.value&&t.birthday=="暂无"){alert("该角色暂无生日信息！");return}if(k.value&&!t.icon){alert("该角色暂无图标信息！");return}if(_.value&&!t.eye){alert("该角色暂无瞳色信息！");return}t.checked=!t.checked};return(t,e)=>(c(),i(g,null,[re,n("div",de,[n("div",ue,[he,(c(!0),i(g,null,y(h.value,a=>(c(),i("div",{key:a.name},[n("label",{for:a.name},C(a.name),9,ve),n("input",{type:"radio",name:"check",checked:a.mark,value:a.mark,id:a.name,onChange:o=>q(a)},null,40,fe)]))),128))]),n("table",null,[(c(!0),i(g,null,y(G(),a=>(c(),i("tr",{key:a[0].label},[(c(!0),i(g,null,y(a,o=>(c(),i("td",{key:o.label,class:ee({character_selected:o.checked}),onClick:T=>J(o)},C(o.label),11,ge))),128))]))),128))]),n("div",ke,[_e,R.value?(c(!0),i(g,{key:0},y(b.value,a=>(c(),i("div",{key:a.label},[n("label",{for:a.label},C(a.label),9,pe),M(n("input",{"onUpdate:modelValue":o=>a.checked=o,type:"checkbox",id:a.label,onChange:e[0]||(e[0]=o=>B(b.value))},null,40,be),[[S,a.checked]])]))),128)):$("",!0),x.value?(c(!0),i(g,{key:1},y(m.value,a=>(c(),i("div",{key:a.label},[n("label",{for:a.label},C(a.label),9,me),M(n("input",{"onUpdate:modelValue":o=>a.checked=o,type:"checkbox",id:a.label,onChange:e[1]||(e[1]=o=>B(m.value))},null,40,ye),[[S,a.checked]])]))),128)):$("",!0),_.value||k.value?(c(!0),i(g,{key:2},y(p.value,a=>(c(),i("div",{key:a.label},[n("label",{for:a.label},C(a.label),9,we),M(n("input",{"onUpdate:modelValue":o=>a.checked=o,type:"checkbox",id:a.label,onChange:e[2]||(e[2]=o=>B(p.value))},null,40,xe),[[S,a.checked]])]))),128)):$("",!0)]),k.value?(c(),i("div",Le,[Ce,n("div",null,[Ie,M(n("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>A.value=a),type:"checkbox",id:"black-and-white"},null,512),[[S,A.value]])])])):$("",!0),n("div",{id:"button-container"},[n("button",{onClick:K,class:"btns",style:{"background-color":"cornflowerblue"}},"绘制图片"),n("button",{onClick:O,class:"btns",style:{"background-color":"gray"}},"清空选择"),n("button",{onClick:X,class:"btns"},"下载图片"),n("button",{onClick:Y,class:"btns"},"下载答案")])]),n("div",Ue,[n("canvas",{id:"art-canvas",ref_key:"canvas",ref:u,width:"1000",height:"200"},null,512),n("canvas",{id:"art-canvas-ans",ref_key:"canvas_ans",ref:F,width:"1000",height:"200",style:{display:"none"}},null,512)]),Ve],64))}},De=Q(Me,[["__scopeId","data-v-2915ef73"]]);export{De as default};
