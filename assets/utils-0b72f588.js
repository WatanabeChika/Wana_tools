import{g as N}from"./_commonjsHelpers-de833af9.js";var m={task:void 0,next:null},R=m,_=!1,x=void 0,U=!1;function E(){for(;m.next;){m=m.next;var t=m.task;m.task=void 0;var e=m.domain;e&&(m.domain=void 0,e.enter());try{t()}catch(n){if(U)throw e&&e.exit(),setTimeout(E,0),e&&e.enter(),n;setTimeout(function(){throw n},0)}e&&e.exit()}_=!1}if(typeof process<"u"&&process.nextTick)U=!0,x=function(){process.nextTick(E)};else if(typeof setImmediate=="function")typeof window<"u"?x=setImmediate.bind(window,E):x=function(){setImmediate(E)};else if(typeof MessageChannel<"u"){var $=new MessageChannel;$.port1.onmessage=E,x=function(){$.port2.postMessage(0)}}else x=function(){setTimeout(E,0)};function z(t){R=R.next={task:t,domain:U&&process.domain,next:null},_||(_=!0,x())}var S=z,D=S,k=G;function G(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");var e=null,n=null,i=[],o=this;this.then=function(r,l){return new o.constructor(function(p,y){a(new H(r,l,p,y))})};function a(r){if(e===null){i.push(r);return}D(function(){var l=e?r.onFulfilled:r.onRejected;if(l===null){(e?r.resolve:r.reject)(n);return}var p;try{p=l(n)}catch(y){r.reject(y);return}r.resolve(p)})}function s(r){try{if(r===o)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(typeof r=="object"||typeof r=="function")){var l=r.then;if(typeof l=="function"){K(l.bind(r),s,c);return}}e=!0,n=r,f()}catch(p){c(p)}}function c(r){e=!1,n=r,f()}function f(){for(var r=0,l=i.length;r<l;r++)a(i[r]);i=null}K(t,s,c)}function H(t,e,n,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=i}function K(t,e,n){var i=!1;try{t(function(o){i||(i=!0,e(o))},function(o){i||(i=!0,n(o))})}catch(o){if(i)return;i=!0,n(o)}}var J=k,q=S;J.prototype.done=function(t,e){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(i){q(function(){throw i})})};var h=k,Y=S;function v(t){this.then=function(e){return typeof e!="function"?this:new h(function(n,i){Y(function(){try{n(e(t))}catch(o){i(o)}})})}}v.prototype=h.prototype;var Z=new v(!0),Q=new v(!1),X=new v(null),V=new v(void 0),tt=new v(0),et=new v("");h.resolve=function(t){if(t instanceof h)return t;if(t===null)return X;if(t===void 0)return V;if(t===!0)return Z;if(t===!1)return Q;if(t===0)return tt;if(t==="")return et;if(typeof t=="object"||typeof t=="function")try{var e=t.then;if(typeof e=="function")return new h(e.bind(t))}catch(n){return new h(function(i,o){o(n)})}return new v(t)};h.all=function(t){var e=Array.prototype.slice.call(t);return new h(function(n,i){if(e.length===0)return n([]);var o=e.length;function a(c,f){try{if(f&&(typeof f=="object"||typeof f=="function")){var r=f.then;if(typeof r=="function"){r.call(f,function(l){a(c,l)},i);return}}e[c]=f,--o===0&&n(e)}catch(l){i(l)}}for(var s=0;s<e.length;s++)a(s,e[s])})};h.reject=function(t){return new h(function(e,n){n(t)})};h.race=function(t){return new h(function(e,n){t.forEach(function(i){h.resolve(i).then(e,n)})})};h.prototype.catch=function(t){return this.then(null,t)};var W=k,O=S;W.denodeify=function(t,e){return e=e||1/0,function(){var n=this,i=Array.prototype.slice.call(arguments);return new W(function(o,a){for(;i.length&&i.length>e;)i.pop();i.push(function(c,f){c?a(c):o(f)});var s=t.apply(n,i);s&&(typeof s=="object"||typeof s=="function")&&typeof s.then=="function"&&o(s)})}};W.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n=typeof e[e.length-1]=="function"?e.pop():null,i=this;try{return t.apply(this,arguments).nodeify(n,i)}catch(o){if(n===null||typeof n>"u")return new W(function(a,s){s(o)});O(function(){n.call(i,o)})}}};W.prototype.nodeify=function(t,e){if(typeof t!="function")return this;this.then(function(n){O(function(){t.call(e,null,n)})},function(n){O(function(){t.call(e,n)})})};var nt=k,T={},P=T;T.createElement=function(t){return document.createElement(t)};T.createText=function(t){return document.createTextNode(t)};T.style=function(t,e){t.style.cssText=e};T.append=function(t,e){t.appendChild(e)};T.remove=function(t,e){t.removeChild(e)};var u=P,g=function(t){var e="display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;";this.element=u.createElement("div"),this.element.setAttribute("aria-hidden","true"),u.append(this.element,u.createText(t)),this.collapsible=u.createElement("span"),this.expandable=u.createElement("span"),this.collapsibleInner=u.createElement("span"),this.expandableInner=u.createElement("span"),this.lastOffsetWidth=-1,u.style(this.collapsible,e),u.style(this.expandable,e),u.style(this.expandableInner,e),u.style(this.collapsibleInner,"display:inline-block;width:200%;height:200%;"),u.append(this.collapsible,this.collapsibleInner),u.append(this.expandable,this.expandableInner),u.append(this.element,this.collapsible),u.append(this.element,this.expandable)},it=g;g.prototype.getElement=function(){return this.element};g.prototype.setFont=function(t,e){u.style(this.element,"min-width:20px;min-height:20px;display:inline-block;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font-size:100px;font-family:"+t+";"+e)};g.prototype.getWidth=function(){return this.element.offsetWidth};g.prototype.setWidth=function(t){this.element.style.width=t+"px"};g.prototype.reset=function(){var t=this.getWidth(),e=t+100;return this.expandableInner.style.width=e+"px",this.expandable.scrollLeft=e,this.collapsible.scrollLeft=this.collapsible.scrollWidth+100,this.lastOffsetWidth!==t?(this.lastOffsetWidth=t,!0):!1};g.prototype.onScroll=function(t){this.reset()&&this.element.parentNode!==null&&t(this.lastOffsetWidth)};g.prototype.onResize=function(t){var e=this;this.collapsible.addEventListener("scroll",function(){e.onScroll(t)},!1),this.expandable.addEventListener("scroll",function(){e.onScroll(t)},!1),this.reset()};var ot=nt,b=P,C=it,d=function(t,e){e=e||{weight:"normal"},this.family=t,this.style=e.style||"normal",this.variant=e.variant||"normal",this.weight=e.weight||"normal",this.stretch=e.stretch||"stretch",this.featureSettings=e.featureSettings||"normal"},rt=d;d.HAS_WEBKIT_FALLBACK_BUG=null;d.DEFAULT_TIMEOUT=3e3;d.getUserAgent=function(){return window.navigator.userAgent};d.hasWebKitFallbackBug=function(){if(d.HAS_WEBKIT_FALLBACK_BUG===null){var t=/AppleWeb[kK]it\/([0-9]+)(?:\.([0-9]+))/.exec(d.getUserAgent());d.HAS_WEBKIT_FALLBACK_BUG=!!t&&(parseInt(t[1],10)<536||parseInt(t[1],10)===536&&parseInt(t[2],10)<=11)}return d.HAS_WEBKIT_FALLBACK_BUG};d.prototype.getStyle=function(){return"font-style:"+this.style+";font-variant:"+this.variant+";font-weight:"+this.weight+";font-stretch:"+this.stretch+";font-feature-settings:"+this.featureSettings+";-moz-font-feature-settings:"+this.featureSettings+";-webkit-font-feature-settings:"+this.featureSettings+";"};d.prototype.check=function(t,e){var n=t||"BESbswy",i=e||d.DEFAULT_TIMEOUT,o=this.getStyle(),a=b.createElement("div"),s=new C(n),c=new C(n),f=new C(n),r=-1,l=-1,p=-1,y=-1,I=-1,F=-1,w=this;return s.setFont('"Times New Roman", sans-serif',o),c.setFont("serif",o),f.setFont("monospace",o),b.append(a,s.getElement()),b.append(a,c.getElement()),b.append(a,f.getElement()),b.append(document.body,a),y=s.getWidth(),I=c.getWidth(),F=f.getWidth(),new ot(function(j,M){function B(){a.parentNode!==null&&b.remove(document.body,a)}function L(){r!==-1&&l!==-1&&p!==-1&&r===l&&l===p&&(d.hasWebKitFallbackBug()&&(r===y&&l===y&&p===y||r===I&&l===I&&p===I||r===F&&l===F&&p===F)||(B(),j(w)))}setTimeout(function(){B(),M(w)},i),s.onResize(function(A){r=A,L()}),s.setFont(w.family+",sans-serif",o),c.onResize(function(A){l=A,L()}),c.setFont(w.family+",serif",o),f.onResize(function(A){p=A,L()}),f.setFont(w.family+",monospace",o)})};const at=N(rt);function lt(t,e,n,i,o,a,s){t.fillStyle=e,t.font=n,t.textAlign="center",t.textBaseline="middle",i&&(t.strokeStyle="white",t.lineWidth=15,t.lineJoin="round",t.globalCompositeOperation=="destination-out"?(t.globalCompositeOperation="source-over",t.strokeText(s,o+3,a+3),t.globalCompositeOperation="destination-out"):t.strokeText(s,o+3,a+3)),t.fillText(s,o,a)}function ft(t,e){const i=document.createElement("canvas").getContext("2d");i.font=e;const o=i.measureText(t);return Math.ceil(o.width)}function ut(t){return new Promise((e,n)=>{const i=new Image;i.crossOrigin="Anonymous",i.src=t,i.onload=()=>e(i),i.onerror=n})}function ct(t,e){let n=t.slice(),i=[];for(let o=n.length-1;o>0;o--){const a=Math.floor(Math.random()*(o+1));[n[o],n[a]]=[n[a],n[o]]}if(!e)return n;for(let o=0;o<t.length;o++){const a=t[o];i.push([o,n.indexOf(a)])}return[n,i]}export{at as F,lt as f,ft as g,ut as l,ct as s};
