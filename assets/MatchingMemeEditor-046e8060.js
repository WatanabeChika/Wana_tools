import{_ as q,r as d,o as G,a as o,c as s,b as c,F as v,d as p,t as y,s as J,e as S,v as R,i as $,p as Q,g as Z,h as K}from"./index-cdee7d32.js";import{F as ee,f as w,l as N,s as ae}from"./utils-2de5d28f.js";import{L as le,a as te}from"./data-baaf6f84.js";import"./_commonjsHelpers-23102255.js";const T=x=>(Q("data-v-2373a8bb"),x=x(),Z(),x),ce=T(()=>c("h1",null,"LoveLive!连线梗图制作器",-1)),ne={id:"input-container"},oe={id:"modes-settings"},se=T(()=>c("span",{id:"matching-hint"},"主题选择: ",-1)),re=["for"],ie=["checked","value","id","onChange"],de=["onClick"],he={id:"modes-settings"},ue=T(()=>c("span",{id:"matching-hint"},"快捷选项: ",-1)),fe=["for"],ve=["onUpdate:modelValue","id"],ke=["for"],be=["onUpdate:modelValue","id"],ge=["for"],_e=["onUpdate:modelValue","id"],pe={id:"canvas-container"},me=T(()=>c("div",{id:"notice"},[c("p",null,"注意：某些角色数据有相应缺失，选择时会做提醒。"),c("p",null,[K("应援色和生日数据来源： "),c("a",{href:"https://llwiki.org/"},"LLWiki")]),c("p",null,[K("瞳色数据来源： "),c("a",{href:"https://twitter.com/makoteau/status/1704457996808437882"},"@makoteau")])],-1)),A="bold 50px KaiTi",j="35px KaiTi",D="images/",ye="white",C="black",we="连线题：",Ce="请将各角色连至其对应的",xe={__name:"MatchingMemeEditor",setup(x){const h=d(null),L=d(null),V=d(!0),m=d(!1),k=d(!1),O=new ee("KaiTi"),b=d(le),r=d(te),u=d([{name:"应援色",mark:V},{name:"生日",mark:m},{name:"瞳色",mark:k}]),g=d([{label:"蓝色系",checked:!1,char:[1,3,13,18,23,24,34,37,43,47,52]},{label:"红色系",checked:!1,char:[5,12,27,39,49]},{label:"黄色系",checked:!1,char:[0,4,9,15,22,25,33,38,45,46,53]},{label:"绿色系",checked:!1,char:[7,11,28,30,36,40,48]},{label:"紫色系",checked:!1,char:[6,16,26,42,44,54]},{label:"粉色系",checked:!1,char:[8,10,17,21,32,35,41,50]},{label:"白色系",checked:!1,char:[2,14,19,29,31,51]}]),_=d([{label:"1月",checked:!1,char:[7,12,22,42,47]},{label:"2月",checked:!1,char:[11,28,32,35,53]},{label:"3月",checked:!1,char:[3,15,21]},{label:"4月",checked:!1,char:[5,13,23,38]},{label:"5月",checked:!1,char:[18,25,33,46]},{label:"6月",checked:!1,char:[6,16,24,40,48]},{label:"7月",checked:!1,char:[8,14,34]},{label:"8月",checked:!1,char:[0,9,27,41,50]},{label:"9月",checked:!1,char:[2,10,17,36,54]},{label:"10月",checked:!1,char:[1,30,39,52]},{label:"11月",checked:!1,char:[4,29,37,49]},{label:"12月",checked:!1,char:[19,26,31,43,51]}]);let i,f,E,I=D+"character_icons/";async function P(){let a=[];for(let t=0;t<r.value.length;t++)r.value[t].checked&&a.push(r.value[t]);h.value.height=E+a.length*175+50,L.value.height=E+a.length*175+50,i.fillStyle=ye,i.fillRect(0,0,h.value.width,h.value.height),w(i,C,A,!1,520,60,we),w(i,C,A,!1,410,135,Ce);for(let t=0;t<u.value.length;t++)if(u.value[t].mark){w(i,C,A,!1,760,135,u.value[t].name);break}const e=170,l=300;for(let t=0;t<a.length;t++)if(k.value)w(i,C,j,!1,e-30,l+t*175,a[t].label);else{const M=await N(I+a[t].Eng+".png");i.drawImage(M,e-80,l+t*175-70,130,130)}const[n,U]=ae(a);if(V.value)for(let t=0;t<n.length;t++)i.fillStyle=n[t].color,i.fillRect(e+570,l+t*175-50,180,100);else if(m.value)for(let t=0;t<n.length;t++)w(i,C,j,!1,e+640,l+t*175,n[t].birthday);else if(k.value){I=D+"eye_color/";for(let t=0;t<n.length;t++){const M=await N(I+n[t].Eng+".png");i.drawImage(M,e+570,l+t*175-70,130,130)}I=D+"character_icons/"}f.drawImage(h.value,0,0);for(let t=0;t<U.length;t++)f.beginPath(),f.moveTo(e+75,l+U[t][0]*175),f.lineTo(e+550,l+U[t][1]*175),f.strokeStyle="black",f.lineWidth=3,f.stroke()}function W(){const a=h.value.toDataURL("image/png"),e=document.createElement("a");e.href=a,e.download="连线题.png",e.click()}function z(){const a=L.value.toDataURL("image/png"),e=document.createElement("a");e.href=a,e.download="答案.png",e.click()}G(async()=>{try{await Promise.all([O.check()]),i=h.value.getContext("2d"),f=L.value.getContext("2d"),E=h.value.height,P()}catch(a){console.error(a)}});const B=()=>{for(let a=0;a<r.value.length;a++)r.value[a].checked=!1;for(let a=0;a<g.value.length;a++)g.value[a].checked=!1;for(let a=0;a<_.value.length;a++)_.value[a].checked=!1;for(let a=0;a<b.value.length;a++)b.value[a].checked=!1},F=a=>{for(let e=0;e<r.value.length;e++)r.value[e].checked=!1;for(let e=0;e<a.length;e++)if(a[e].checked)for(let l=0;l<a[e].char.length;l++){const n=a[e].char[l];m.value&&r.value[n].birthday=="暂无"||k.value&&!r.value[n].eye||(r.value[n].checked=!0)}},H=a=>{for(let e=0;e<u.value.length;e++)u.value[e].name!=a.name?u.value[e].mark=!1:u.value[e].mark=!0;B()},X=()=>{const a=[];for(let e=0;e<r.value.length;e+=7)a.push(r.value.slice(e,e+7));return a},Y=a=>{for(let e=0;e<g.value.length;e++)g.value[e].checked=!1;for(let e=0;e<_.value.length;e++)_.value[e].checked=!1;for(let e=0;e<b.value.length;e++)b.value[e].checked=!1;if(m.value&&a.birthday=="暂无"){alert("该角色暂无生日信息！");return}if(k.value&&!a.eye){alert("该角色暂无瞳色信息！");return}a.checked=!a.checked};return(a,e)=>(o(),s(v,null,[ce,c("div",ne,[c("div",oe,[se,(o(!0),s(v,null,p(u.value,l=>(o(),s("div",{key:l.name},[c("label",{for:l.name},y(l.name),9,re),c("input",{type:"radio",name:"check",checked:l.mark,value:l.mark,id:l.name,onChange:n=>H(l)},null,40,ie)]))),128))]),c("table",null,[(o(!0),s(v,null,p(X(),l=>(o(),s("tr",{key:l[0].label},[(o(!0),s(v,null,p(l,n=>(o(),s("td",{key:n.label,class:J({character_selected:n.checked}),onClick:U=>Y(n)},y(n.label),11,de))),128))]))),128))]),c("div",he,[ue,V.value?(o(!0),s(v,{key:0},p(g.value,l=>(o(),s("div",{key:l.label},[c("label",{for:l.label},y(l.label),9,fe),S(c("input",{"onUpdate:modelValue":n=>l.checked=n,type:"checkbox",id:l.label,onChange:e[0]||(e[0]=n=>F(g.value))},null,40,ve),[[R,l.checked]])]))),128)):$("",!0),m.value?(o(!0),s(v,{key:1},p(_.value,l=>(o(),s("div",{key:l.label},[c("label",{for:l.label},y(l.label),9,ke),S(c("input",{"onUpdate:modelValue":n=>l.checked=n,type:"checkbox",id:l.label,onChange:e[1]||(e[1]=n=>F(_.value))},null,40,be),[[R,l.checked]])]))),128)):$("",!0),k.value?(o(!0),s(v,{key:2},p(b.value,l=>(o(),s("div",{key:l.label},[c("label",{for:l.label},y(l.label),9,ge),S(c("input",{"onUpdate:modelValue":n=>l.checked=n,type:"checkbox",id:l.label,onChange:e[2]||(e[2]=n=>F(b.value))},null,40,_e),[[R,l.checked]])]))),128)):$("",!0)]),c("div",{id:"button-container"},[c("button",{onClick:P,class:"btns",style:{"background-color":"cornflowerblue"}},"绘制图片"),c("button",{onClick:B,class:"btns",style:{"background-color":"gray"}},"清空选择"),c("button",{onClick:W,class:"btns"},"下载图片"),c("button",{onClick:z,class:"btns"},"下载答案")])]),c("div",pe,[c("canvas",{id:"art-canvas",ref_key:"canvas",ref:h,width:"1000",height:"200"},null,512),c("canvas",{id:"art-canvas-ans",ref_key:"canvas_ans",ref:L,width:"1000",height:"200",style:{display:"none"}},null,512)]),me],64))}},Ve=q(xe,[["__scopeId","data-v-2373a8bb"]]);export{Ve as default};
