import{_ as ue,r as u,o as se,w as T,a as q,c as G,b as l,F as ee,d as de,t as ve,e as w,v as re,f as U,i as he,u as K,p as pe,g as ce,h as me}from"./index-6616d7ba.js";import{F as te,g as $,f as d,l as Q}from"./utils-d39f28cd.js";import"./_commonjsHelpers-de833af9.js";const b=O=>(pe("data-v-131d72bc"),O=O(),ce(),O),ge=b(()=>l("h1",null,"LoveLive!Sunshine!!风格Logo生成器",-1)),_e={id:"canvas-container"},fe={id:"input-container"},xe={id:"canvas-settings"},we=["for"],be=["onUpdate:modelValue","id"],Se={key:0,id:"image-settings"},Le={id:"imgExist"},ke={class:"image-manual"},ye=b(()=>l("label",{for:"imageX"},"X",-1)),Ce=["max"],Ie={class:"image-manual"},Fe=b(()=>l("label",{for:"imageY"},"Y",-1)),Ve=["max"],Ue={class:"image-manual"},Me=b(()=>l("br",null,null,-1)),We=["placeholder"],Ee=b(()=>l("br",null,null,-1)),Te=["placeholder"],$e=b(()=>l("br",null,null,-1)),Xe=["placeholder"],je=b(()=>l("br",null,null,-1)),Be=b(()=>l("div",{id:"notice"},[l("p",null,"注意：输入文字过长会导致图片崩坏。"),l("p",null,[me("使用字体：Lido Bold Italic、FF Magda Clean Mono。无中文fallback字体。参考： "),l("a",{href:"https://zhuanlan.zhihu.com/p/20356949"},"链接")])],-1)),X="bold italic 120px LIST",j="italic 25px FFMC",B="bold italic 66px LIST",Re={__name:"LoveLiveSSEditor",setup(O){const a=u(null),p=u(""),S=u(""),L=u(""),m=u(!1),h=u(!1),M=u(!1),i=u(!1),k=u(!0),g=u(0),_=u(0),z=u(0),Z=u(0),ae=new te("LIST"),le=new te("FFMC"),oe=u([{name:"透明背景",mark:m},{name:"超级新星",mark:h},{name:"互换底色",mark:M},{name:"文字描边",mark:i},{name:"图片组件",mark:k}]);let y="LoveLive!",C="School idol project",v="Sunshine!!",R="images/LLSS_star",A="",f=!1,o,Y,x,n;async function I(s,t){o=a.value.getContext("2d");const e=$(p.value||y,X),r=$(S.value||C,j),F=$(L.value||v,B);e>Y-36||r>Y/2+e/2-25-36||F>Y/2+e/2-30-36?(a.value.width=Math.max(e+36,(r+36+25-e/2)*2,(F+36+30-e/2)*2),z.value=a.value.width):(a.value.width=Y,z.value=a.value.width),o.fillStyle=x,o.fillRect(0,0,a.value.width,a.value.height);const[c,N]=[a.value.width/2+e/2-F/2-30,a.value.height/2+63];i.value?A="_stroke":M.value&&(A="_white");const V=await Q(R+A+".png"),[W,E,P,H]=s?[t?g.value-62.5:c-248,t?_.value-55:N-75,V.width/4,V.height/4]:[t?g.value-125:c-310,t?_.value-110:N-145,V.width/2,V.height/2];if(t||([g.value,_.value]=[s?W+62.5:W+125,s?E+55:E+110]),!m.value&&M.value&&i.value){const J=n;n=x,d(o,n,X,i.value,a.value.width/2,a.value.height/2-50,p.value||y),d(o,n,j,i.value,a.value.width/2+e/2-r/2-25,a.value.height/2+16,S.value||C),d(o,n,B,i.value,c,N,L.value||v),n=J,k.value&&o.drawImage(V,W,E,P,H)}else if(m.value&&M.value){const J=n;if(n="blue",o.globalCompositeOperation="destination-out",d(o,n,X,i.value,a.value.width/2,a.value.height/2-50,p.value||y),d(o,n,j,i.value,a.value.width/2+e/2-r/2-25,a.value.height/2+16,S.value||C),d(o,n,B,i.value,c,N,L.value||v),k.value&&o.drawImage(V,W,E,P,H),o.globalCompositeOperation="source-over",n=J,i.value){const ie=await Q(R+"_empty.png");k.value&&o.drawImage(ie,W,E,P,H)}}else d(o,n,X,i.value,a.value.width/2,a.value.height/2-50,p.value||y),d(o,n,j,i.value,a.value.width/2+e/2-r/2-25,a.value.height/2+16,S.value||C),d(o,n,B,i.value,c,N,L.value||v),k.value&&o.drawImage(V,W,E,P,H);A=""}function ne(){const s=a.value.toDataURL(m.value?"image/png":"image/jpeg"),t=document.createElement("a");t.href=s,t.download=m.value?`${p.value||v}.png`:`${p.value||v}.jpg`,t.click()}se(async()=>{try{await Promise.all([ae.check(),le.check()]),o=a.value.getContext("2d"),Y=a.value.width,z.value=a.value.width,Z.value=a.value.height,x="white",n="#E4007F",o.fillStyle=x,o.fillRect(0,0,a.value.width,a.value.height);const s=$(y,X),t=$(C,j),e=$(v,B),[r,F]=[a.value.width/2+s/2-e/2-30,a.value.height/2+63];d(o,n,X,!1,a.value.width/2,a.value.height/2-50,y),d(o,n,j,!1,a.value.width/2+s/2-t/2-25,a.value.height/2+16,C),d(o,n,B,!1,r,F,v);const c=await Q(R+".png");[g.value,_.value]=[r-310+125,F-145+110],o.drawImage(c,r-310,F-145,c.width/2,c.height/2)}catch(s){console.error(s)}});function D(s){f=s,I(h.value,f)}return T([p,S,L],()=>{I(h.value,f)}),T(m,()=>{M.value?m.value?n="transparent":n="white":m.value?x="transparent":x="white",I(h.value,f)}),T(h,()=>{h.value?(v="Superstar!!",R="images/LLSP_star"):(v="Sunshine!!",R="images/LLSS_star"),I(h.value,f)}),T(M,()=>{[x,n]=[n,x],I(h.value,f)}),T(i,()=>{I(h.value,f)}),T(k,()=>{I(h.value,f)}),(s,t)=>(q(),G(ee,null,[ge,l("div",_e,[l("canvas",{id:"art-canvas",ref_key:"canvas",ref:a,width:"1000",height:"500"},null,512)]),l("div",fe,[l("div",xe,[(q(!0),G(ee,null,de(oe.value,e=>(q(),G("div",{key:e.name},[l("label",{for:e.name},ve(e.name),9,we),w(l("input",{"onUpdate:modelValue":r=>e.mark=r,type:"checkbox",id:e.name},null,8,be),[[re,e.mark]])]))),128))]),k.value?(q(),G("div",Se,[l("div",Le,[l("div",ke,[ye,w(l("input",{type:"range",id:"imageX",min:"0",max:z.value,step:"1","onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),onInput:t[1]||(t[1]=e=>D(!0))},null,40,Ce),[[U,g.value]]),w(l("input",{type:"number",id:"imageX","onUpdate:modelValue":t[2]||(t[2]=e=>g.value=e),onInput:t[3]||(t[3]=e=>D(!0))},null,544),[[U,g.value]])]),l("div",Ie,[Fe,w(l("input",{type:"range",id:"imageY",min:"0",max:Z.value,step:"1","onUpdate:modelValue":t[4]||(t[4]=e=>_.value=e),onInput:t[5]||(t[5]=e=>D(!0))},null,40,Ve),[[U,_.value]]),w(l("input",{type:"number",id:"imageX","onUpdate:modelValue":t[6]||(t[6]=e=>_.value=e),onInput:t[7]||(t[7]=e=>D(!0))},null,544),[[U,_.value]])])]),l("div",Ue,[l("button",{onClick:t[8]||(t[8]=e=>D(!1)),id:"autoAdjust-btn"},"恢复默认")])])):he("",!0),Me,w(l("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>p.value=e),type:"text",id:"text-input1",placeholder:K(y)},null,8,We),[[U,p.value]]),Ee,w(l("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>S.value=e),type:"text",id:"text-input2",placeholder:K(C)},null,8,Te),[[U,S.value]]),$e,w(l("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>L.value=e),type:"text",id:"text-input3",placeholder:K(v)},null,8,Xe),[[U,L.value]]),je,l("button",{onClick:ne,id:"download-btn"},"下载图片")]),Be],64))}},Oe=ue(Re,[["__scopeId","data-v-131d72bc"]]);export{Oe as default};
