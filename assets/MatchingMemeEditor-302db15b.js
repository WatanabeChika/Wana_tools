import{_ as J,r as d,o as Q,a as s,c as i,b as n,F as g,d as y,t as C,n as Z,e as M,v as S,i as R,p as ee,g as te,h as O}from"./index-5eeae3de.js";import{F as ae,f as I,l as B,s as le}from"./utils-d39f28cd.js";import{L as ne,a as oe,b as ce,c as se}from"./data-ca991437.js";import"./_commonjsHelpers-de833af9.js";const w=E=>(ee("data-v-3ed8cc4a"),E=E(),te(),E),ie=w(()=>n("h1",null,"LoveLive!连线梗图制作器",-1)),re={id:"input-container"},de={id:"modes-settings"},ue=w(()=>n("span",{id:"matching-hint"},"主题选择: ",-1)),he=["for"],ve=["checked","value","id","onChange"],fe=["onClick"],ge={id:"modes-settings"},_e=w(()=>n("span",{id:"matching-hint"},"快捷选项: ",-1)),ke=["for"],pe=["onUpdate:modelValue","id"],be=["for"],me=["onUpdate:modelValue","id"],ye=["for"],we=["onUpdate:modelValue","id"],Le={key:0,id:"modes-settings"},xe=w(()=>n("span",{id:"matching-hint"},"难度调整: ",-1)),Ce=w(()=>n("label",{for:"black-and-white"},"黑白图标",-1)),Ie={id:"canvas-container"},Ue=w(()=>n("div",{id:"notice"},[n("p",null,"注意：某些角色数据有相应缺失，选择时会做提醒。"),n("p",null,[O("应援色和生日数据来源： "),n("a",{href:"https://llwiki.org/"},"LLWiki")]),n("p",null,[O("瞳色数据来源： "),n("a",{href:"https://twitter.com/makoteau/status/1704457996808437882"},"@makoteau")])],-1)),K="bold 50px KaiTi",W="35px KaiTi",U="images/",Ve="white",V="black",Ee="连线题：",Te="请将各角色连至其对应的",Fe={__name:"MatchingMemeEditor",setup(E){const u=d(null),T=d(null),$=d(!0),L=d(!1),_=d(!1),k=d(!1),A=d(!1),z=new ae("KaiTi"),p=d(ne),b=d(oe),m=d(ce),r=d(se),h=d([{name:"应援色",mark:$},{name:"生日",mark:L},{name:"图标",mark:_},{name:"瞳色",mark:k}]);let c,v,D,f=U+"characters/";async function N(){let t=[];for(let l=0;l<r.value.length;l++)r.value[l].checked&&t.push(r.value[l]);u.value.height=D+t.length*175+50,T.value.height=D+t.length*175+50,c.fillStyle=Ve,c.fillRect(0,0,u.value.width,u.value.height),I(c,V,K,!1,520,60,Ee),I(c,V,K,!1,410,135,Te);for(let l=0;l<h.value.length;l++)if(h.value[l].mark){I(c,V,K,!1,760,135,h.value[l].name);break}const e=170,a=300;for(let l=0;l<t.length;l++)if(k.value)I(c,V,W,!1,e-30,a+l*175,t[l].label);else{const x=await B(f+t[l].Eng+".png");c.drawImage(x,e-80,a+l*175-70,130,130)}const[o,F]=le(t);if($.value)for(let l=0;l<o.length;l++)c.fillStyle=o[l].color,c.fillRect(e+570,a+l*175-50,180,100);else if(L.value)for(let l=0;l<o.length;l++)I(c,V,W,!1,e+640,a+l*175,o[l].birthday);else if(_.value){f=U+"character_icons/";for(let l=0;l<o.length;l++){const x=await B(f+o[l].Eng+".png");A.value&&(c.filter="grayscale(100%)"),c.drawImage(x,e+570,a+l*175-70,130,130),c.filter="none"}f=U+"characters/"}else if(k.value){f=U+"eye_color/";for(let l=0;l<o.length;l++){const x=await B(f+o[l].Eng+".png");c.drawImage(x,e+570,a+l*175-70,130,130)}f=U+"characters/"}v.drawImage(u.value,0,0);for(let l=0;l<F.length;l++)v.beginPath(),v.moveTo(e+75,a+F[l][0]*175),v.lineTo(e+550,a+F[l][1]*175),v.strokeStyle="black",v.lineWidth=3,v.stroke()}function H(){const t=u.value.toDataURL("image/png"),e=document.createElement("a");e.href=t,e.download="连线题.png",e.click()}function X(){const t=T.value.toDataURL("image/png"),e=document.createElement("a");e.href=t,e.download="答案.png",e.click()}Q(async()=>{try{await Promise.all([z.check()]),c=u.value.getContext("2d"),v=T.value.getContext("2d"),D=u.value.height,N()}catch(t){console.error(t)}});const j=()=>{for(let t=0;t<r.value.length;t++)r.value[t].checked=!1;for(let t=0;t<b.value.length;t++)b.value[t].checked=!1;for(let t=0;t<m.value.length;t++)m.value[t].checked=!1;for(let t=0;t<p.value.length;t++)p.value[t].checked=!1},P=t=>{for(let e=0;e<r.value.length;e++)r.value[e].checked=!1;for(let e=0;e<t.length;e++)if(t[e].checked)for(let a=0;a<t[e].char.length;a++){const o=t[e].char[a];L.value&&r.value[o].birthday=="暂无"||_.value&&!r.value[o].icon||k.value&&!r.value[o].eye||(r.value[o].checked=!0)}},Y=t=>{for(let e=0;e<h.value.length;e++)h.value[e].name!=t.name?h.value[e].mark=!1:h.value[e].mark=!0;j()},q=()=>{const t=[];for(let e=0;e<r.value.length;e+=7)t.push(r.value.slice(e,e+7));return t},G=t=>{for(let e=0;e<b.value.length;e++)b.value[e].checked=!1;for(let e=0;e<m.value.length;e++)m.value[e].checked=!1;for(let e=0;e<p.value.length;e++)p.value[e].checked=!1;if(L.value&&t.birthday=="暂无"){alert("该角色暂无生日信息！");return}if(_.value&&!t.icon){alert("该角色暂无图标信息！");return}if(k.value&&!t.eye){alert("该角色暂无瞳色信息！");return}t.checked=!t.checked};return(t,e)=>(s(),i(g,null,[ie,n("div",re,[n("div",de,[ue,(s(!0),i(g,null,y(h.value,a=>(s(),i("div",{key:a.name},[n("label",{for:a.name},C(a.name),9,he),n("input",{type:"radio",name:"check",checked:a.mark,value:a.mark,id:a.name,onChange:o=>Y(a)},null,40,ve)]))),128))]),n("table",null,[(s(!0),i(g,null,y(q(),a=>(s(),i("tr",{key:a[0].label},[(s(!0),i(g,null,y(a,o=>(s(),i("td",{key:o.label,class:Z({character_selected:o.checked}),onClick:F=>G(o)},C(o.label),11,fe))),128))]))),128))]),n("div",ge,[_e,$.value?(s(!0),i(g,{key:0},y(b.value,a=>(s(),i("div",{key:a.label},[n("label",{for:a.label},C(a.label),9,ke),M(n("input",{"onUpdate:modelValue":o=>a.checked=o,type:"checkbox",id:a.label,onChange:e[0]||(e[0]=o=>P(b.value))},null,40,pe),[[S,a.checked]])]))),128)):R("",!0),L.value?(s(!0),i(g,{key:1},y(m.value,a=>(s(),i("div",{key:a.label},[n("label",{for:a.label},C(a.label),9,be),M(n("input",{"onUpdate:modelValue":o=>a.checked=o,type:"checkbox",id:a.label,onChange:e[1]||(e[1]=o=>P(m.value))},null,40,me),[[S,a.checked]])]))),128)):R("",!0),k.value||_.value?(s(!0),i(g,{key:2},y(p.value,a=>(s(),i("div",{key:a.label},[n("label",{for:a.label},C(a.label),9,ye),M(n("input",{"onUpdate:modelValue":o=>a.checked=o,type:"checkbox",id:a.label,onChange:e[2]||(e[2]=o=>P(p.value))},null,40,we),[[S,a.checked]])]))),128)):R("",!0)]),_.value?(s(),i("div",Le,[xe,n("div",null,[Ce,M(n("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>A.value=a),type:"checkbox",id:"black-and-white"},null,512),[[S,A.value]])])])):R("",!0),n("div",{id:"button-container"},[n("button",{onClick:N,class:"btns",style:{"background-color":"cornflowerblue"}},"绘制图片"),n("button",{onClick:j,class:"btns",style:{"background-color":"gray"}},"清空选择"),n("button",{onClick:H,class:"btns"},"下载图片"),n("button",{onClick:X,class:"btns"},"下载答案")])]),n("div",Ie,[n("canvas",{id:"art-canvas",ref_key:"canvas",ref:u,width:"1000",height:"200"},null,512),n("canvas",{id:"art-canvas-ans",ref_key:"canvas_ans",ref:T,width:"1000",height:"200",style:{display:"none"}},null,512)]),Ue],64))}},Ae=J(Fe,[["__scopeId","data-v-3ed8cc4a"]]);export{Ae as default};
