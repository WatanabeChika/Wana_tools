import{_ as q,r as d,o as G,a as s,c,b as n,F as f,d as b,t as y,n as J,e as S,v as R,i as $,p as Q,g as Z,h as K}from"./index-7cb5e2d7.js";import{F as ee,f as L,l as N,s as te}from"./utils-d39f28cd.js";import{L as ae,a as le,b as ne,c as oe}from"./data-5ae13b0c.js";import"./_commonjsHelpers-de833af9.js";const T=C=>(Q("data-v-70f43e94"),C=C(),Z(),C),se=T(()=>n("h1",null,"LoveLive!连线梗图制作器",-1)),ce={id:"input-container"},ie={id:"modes-settings"},re=T(()=>n("span",{id:"matching-hint"},"主题选择: ",-1)),de=["for"],ue=["checked","value","id","onChange"],he=["onClick"],ve={id:"modes-settings"},fe=T(()=>n("span",{id:"matching-hint"},"快捷选项: ",-1)),ge=["for"],_e=["onUpdate:modelValue","id"],ke=["for"],pe=["onUpdate:modelValue","id"],be=["for"],me=["onUpdate:modelValue","id"],ye={id:"canvas-container"},Le=T(()=>n("div",{id:"notice"},[n("p",null,"注意：某些角色数据有相应缺失，选择时会做提醒。"),n("p",null,[K("应援色和生日数据来源： "),n("a",{href:"https://llwiki.org/"},"LLWiki")]),n("p",null,[K("瞳色数据来源： "),n("a",{href:"https://twitter.com/makoteau/status/1704457996808437882"},"@makoteau")])],-1)),A="bold 50px KaiTi",j="35px KaiTi",D="images/",we="white",w="black",Ce="连线题：",xe="请将各角色连至其对应的",Ie={__name:"MatchingMemeEditor",setup(C){const u=d(null),x=d(null),V=d(!0),m=d(!1),g=d(!1),O=new ee("KaiTi"),_=d(ae),k=d(le),p=d(ne),i=d(oe),h=d([{name:"应援色",mark:V},{name:"生日",mark:m},{name:"瞳色",mark:g}]);let r,v,E,I=D+"character_icons/";async function P(){let t=[];for(let l=0;l<i.value.length;l++)i.value[l].checked&&t.push(i.value[l]);u.value.height=E+t.length*175+50,x.value.height=E+t.length*175+50,r.fillStyle=we,r.fillRect(0,0,u.value.width,u.value.height),L(r,w,A,!1,520,60,Ce),L(r,w,A,!1,410,135,xe);for(let l=0;l<h.value.length;l++)if(h.value[l].mark){L(r,w,A,!1,760,135,h.value[l].name);break}const e=170,a=300;for(let l=0;l<t.length;l++)if(g.value)L(r,w,j,!1,e-30,a+l*175,t[l].label);else{const M=await N(I+t[l].Eng+".png");r.drawImage(M,e-80,a+l*175-70,130,130)}const[o,U]=te(t);if(V.value)for(let l=0;l<o.length;l++)r.fillStyle=o[l].color,r.fillRect(e+570,a+l*175-50,180,100);else if(m.value)for(let l=0;l<o.length;l++)L(r,w,j,!1,e+640,a+l*175,o[l].birthday);else if(g.value){I=D+"eye_color/";for(let l=0;l<o.length;l++){const M=await N(I+o[l].Eng+".png");r.drawImage(M,e+570,a+l*175-70,130,130)}I=D+"character_icons/"}v.drawImage(u.value,0,0);for(let l=0;l<U.length;l++)v.beginPath(),v.moveTo(e+75,a+U[l][0]*175),v.lineTo(e+550,a+U[l][1]*175),v.strokeStyle="black",v.lineWidth=3,v.stroke()}function W(){const t=u.value.toDataURL("image/png"),e=document.createElement("a");e.href=t,e.download="连线题.png",e.click()}function z(){const t=x.value.toDataURL("image/png"),e=document.createElement("a");e.href=t,e.download="答案.png",e.click()}G(async()=>{try{await Promise.all([O.check()]),r=u.value.getContext("2d"),v=x.value.getContext("2d"),E=u.value.height,P()}catch(t){console.error(t)}});const B=()=>{for(let t=0;t<i.value.length;t++)i.value[t].checked=!1;for(let t=0;t<k.value.length;t++)k.value[t].checked=!1;for(let t=0;t<p.value.length;t++)p.value[t].checked=!1;for(let t=0;t<_.value.length;t++)_.value[t].checked=!1},F=t=>{for(let e=0;e<i.value.length;e++)i.value[e].checked=!1;for(let e=0;e<t.length;e++)if(t[e].checked)for(let a=0;a<t[e].char.length;a++){const o=t[e].char[a];m.value&&i.value[o].birthday=="暂无"||g.value&&!i.value[o].eye||(i.value[o].checked=!0)}},H=t=>{for(let e=0;e<h.value.length;e++)h.value[e].name!=t.name?h.value[e].mark=!1:h.value[e].mark=!0;B()},X=()=>{const t=[];for(let e=0;e<i.value.length;e+=7)t.push(i.value.slice(e,e+7));return t},Y=t=>{for(let e=0;e<k.value.length;e++)k.value[e].checked=!1;for(let e=0;e<p.value.length;e++)p.value[e].checked=!1;for(let e=0;e<_.value.length;e++)_.value[e].checked=!1;if(m.value&&t.birthday=="暂无"){alert("该角色暂无生日信息！");return}if(g.value&&!t.eye){alert("该角色暂无瞳色信息！");return}t.checked=!t.checked};return(t,e)=>(s(),c(f,null,[se,n("div",ce,[n("div",ie,[re,(s(!0),c(f,null,b(h.value,a=>(s(),c("div",{key:a.name},[n("label",{for:a.name},y(a.name),9,de),n("input",{type:"radio",name:"check",checked:a.mark,value:a.mark,id:a.name,onChange:o=>H(a)},null,40,ue)]))),128))]),n("table",null,[(s(!0),c(f,null,b(X(),a=>(s(),c("tr",{key:a[0].label},[(s(!0),c(f,null,b(a,o=>(s(),c("td",{key:o.label,class:J({character_selected:o.checked}),onClick:U=>Y(o)},y(o.label),11,he))),128))]))),128))]),n("div",ve,[fe,V.value?(s(!0),c(f,{key:0},b(k.value,a=>(s(),c("div",{key:a.label},[n("label",{for:a.label},y(a.label),9,ge),S(n("input",{"onUpdate:modelValue":o=>a.checked=o,type:"checkbox",id:a.label,onChange:e[0]||(e[0]=o=>F(k.value))},null,40,_e),[[R,a.checked]])]))),128)):$("",!0),m.value?(s(!0),c(f,{key:1},b(p.value,a=>(s(),c("div",{key:a.label},[n("label",{for:a.label},y(a.label),9,ke),S(n("input",{"onUpdate:modelValue":o=>a.checked=o,type:"checkbox",id:a.label,onChange:e[1]||(e[1]=o=>F(p.value))},null,40,pe),[[R,a.checked]])]))),128)):$("",!0),g.value?(s(!0),c(f,{key:2},b(_.value,a=>(s(),c("div",{key:a.label},[n("label",{for:a.label},y(a.label),9,be),S(n("input",{"onUpdate:modelValue":o=>a.checked=o,type:"checkbox",id:a.label,onChange:e[2]||(e[2]=o=>F(_.value))},null,40,me),[[R,a.checked]])]))),128)):$("",!0)]),n("div",{id:"button-container"},[n("button",{onClick:P,class:"btns",style:{"background-color":"cornflowerblue"}},"绘制图片"),n("button",{onClick:B,class:"btns",style:{"background-color":"gray"}},"清空选择"),n("button",{onClick:W,class:"btns"},"下载图片"),n("button",{onClick:z,class:"btns"},"下载答案")])]),n("div",ye,[n("canvas",{id:"art-canvas",ref_key:"canvas",ref:u,width:"1000",height:"200"},null,512),n("canvas",{id:"art-canvas-ans",ref_key:"canvas_ans",ref:x,width:"1000",height:"200",style:{display:"none"}},null,512)]),Le],64))}},Fe=q(Ie,[["__scopeId","data-v-70f43e94"]]);export{Fe as default};
