import{_ as G,r as u,o as J,a as i,c as r,b as n,F as g,d as m,t as C,n as Q,e as $,v as A,i as D,p as Z,g as ee,h as j}from"./index-2bd1263e.js";import{F as ae,f as x,l as P,s as te}from"./utils-d39f28cd.js";import{L as le,a as ne,b as oe,c as ce}from"./data-ca991437.js";import"./_commonjsHelpers-de833af9.js";const F=E=>(Z("data-v-beaf5baf"),E=E(),ee(),E),se=F(()=>n("h1",null,"LoveLive!连线梗图制作器",-1)),ie={id:"input-container"},re={id:"modes-settings"},ue=F(()=>n("span",{id:"matching-hint"},"主题选择: ",-1)),de=["for"],he=["checked","value","id","onChange"],ve=["onClick"],fe={id:"modes-settings"},ge=F(()=>n("span",{id:"matching-hint"},"快捷选项: ",-1)),ke=["for"],_e=["onUpdate:modelValue","id"],pe=["for"],be=["onUpdate:modelValue","id"],me=["for"],ye=["onUpdate:modelValue","id"],we={id:"canvas-container"},Le=F(()=>n("div",{id:"notice"},[n("p",null,"注意：某些角色数据有相应缺失，选择时会做提醒。"),n("p",null,[j("应援色和生日数据来源： "),n("a",{href:"https://llwiki.org/"},"LLWiki")]),n("p",null,[j("瞳色数据来源： "),n("a",{href:"https://twitter.com/makoteau/status/1704457996808437882"},"@makoteau")])],-1)),B="bold 50px KaiTi",O="35px KaiTi",I="images/",Ce="white",U="black",xe="连线题：",Ie="请将各角色连至其对应的",Ue={__name:"MatchingMemeEditor",setup(E){const d=u(null),T=u(null),M=u(!0),y=u(!1),w=u(!1),k=u(!1),W=new ae("KaiTi"),_=u(le),p=u(ne),b=u(oe),c=u(ce),h=u([{name:"应援色",mark:M},{name:"生日",mark:y},{name:"图标",mark:w},{name:"瞳色",mark:k}]);let s,v,S,f=I+"characters/";async function K(){let a=[];for(let l=0;l<c.value.length;l++)c.value[l].checked&&a.push(c.value[l]);d.value.height=S+a.length*175+50,T.value.height=S+a.length*175+50,s.fillStyle=Ce,s.fillRect(0,0,d.value.width,d.value.height),x(s,U,B,!1,520,60,xe),x(s,U,B,!1,410,135,Ie);for(let l=0;l<h.value.length;l++)if(h.value[l].mark){x(s,U,B,!1,760,135,h.value[l].name);break}const e=170,t=300;for(let l=0;l<a.length;l++)if(k.value)x(s,U,O,!1,e-30,t+l*175,a[l].label);else{const L=await P(f+a[l].Eng+".png");s.drawImage(L,e-80,t+l*175-70,130,130)}const[o,V]=te(a);if(M.value)for(let l=0;l<o.length;l++)s.fillStyle=o[l].color,s.fillRect(e+570,t+l*175-50,180,100);else if(y.value)for(let l=0;l<o.length;l++)x(s,U,O,!1,e+640,t+l*175,o[l].birthday);else if(w.value){f=I+"character_icons/";for(let l=0;l<o.length;l++){const L=await P(f+o[l].Eng+".png");s.drawImage(L,e+570,t+l*175-70,130,130)}f=I+"characters/"}else if(k.value){f=I+"eye_color/";for(let l=0;l<o.length;l++){const L=await P(f+o[l].Eng+".png");s.drawImage(L,e+570,t+l*175-70,130,130)}f=I+"characters/"}v.drawImage(d.value,0,0);for(let l=0;l<V.length;l++)v.beginPath(),v.moveTo(e+75,t+V[l][0]*175),v.lineTo(e+550,t+V[l][1]*175),v.strokeStyle="black",v.lineWidth=3,v.stroke()}function z(){const a=d.value.toDataURL("image/png"),e=document.createElement("a");e.href=a,e.download="连线题.png",e.click()}function H(){const a=T.value.toDataURL("image/png"),e=document.createElement("a");e.href=a,e.download="答案.png",e.click()}J(async()=>{try{await Promise.all([W.check()]),s=d.value.getContext("2d"),v=T.value.getContext("2d"),S=d.value.height,K()}catch(a){console.error(a)}});const N=()=>{for(let a=0;a<c.value.length;a++)c.value[a].checked=!1;for(let a=0;a<p.value.length;a++)p.value[a].checked=!1;for(let a=0;a<b.value.length;a++)b.value[a].checked=!1;for(let a=0;a<_.value.length;a++)_.value[a].checked=!1},R=a=>{for(let e=0;e<c.value.length;e++)c.value[e].checked=!1;for(let e=0;e<a.length;e++)if(a[e].checked)for(let t=0;t<a[e].char.length;t++){const o=a[e].char[t];y.value&&c.value[o].birthday=="暂无"||w.value&&!c.value[o].icon||k.value&&!c.value[o].eye||(c.value[o].checked=!0)}},X=a=>{for(let e=0;e<h.value.length;e++)h.value[e].name!=a.name?h.value[e].mark=!1:h.value[e].mark=!0;N()},Y=()=>{const a=[];for(let e=0;e<c.value.length;e+=7)a.push(c.value.slice(e,e+7));return a},q=a=>{for(let e=0;e<p.value.length;e++)p.value[e].checked=!1;for(let e=0;e<b.value.length;e++)b.value[e].checked=!1;for(let e=0;e<_.value.length;e++)_.value[e].checked=!1;if(y.value&&a.birthday=="暂无"){alert("该角色暂无生日信息！");return}if(w.value&&!a.icon){alert("该角色暂无图标信息！");return}if(k.value&&!a.eye){alert("该角色暂无瞳色信息！");return}a.checked=!a.checked};return(a,e)=>(i(),r(g,null,[se,n("div",ie,[n("div",re,[ue,(i(!0),r(g,null,m(h.value,t=>(i(),r("div",{key:t.name},[n("label",{for:t.name},C(t.name),9,de),n("input",{type:"radio",name:"check",checked:t.mark,value:t.mark,id:t.name,onChange:o=>X(t)},null,40,he)]))),128))]),n("table",null,[(i(!0),r(g,null,m(Y(),t=>(i(),r("tr",{key:t[0].label},[(i(!0),r(g,null,m(t,o=>(i(),r("td",{key:o.label,class:Q({character_selected:o.checked}),onClick:V=>q(o)},C(o.label),11,ve))),128))]))),128))]),n("div",fe,[ge,M.value?(i(!0),r(g,{key:0},m(p.value,t=>(i(),r("div",{key:t.label},[n("label",{for:t.label},C(t.label),9,ke),$(n("input",{"onUpdate:modelValue":o=>t.checked=o,type:"checkbox",id:t.label,onChange:e[0]||(e[0]=o=>R(p.value))},null,40,_e),[[A,t.checked]])]))),128)):D("",!0),y.value?(i(!0),r(g,{key:1},m(b.value,t=>(i(),r("div",{key:t.label},[n("label",{for:t.label},C(t.label),9,pe),$(n("input",{"onUpdate:modelValue":o=>t.checked=o,type:"checkbox",id:t.label,onChange:e[1]||(e[1]=o=>R(b.value))},null,40,be),[[A,t.checked]])]))),128)):D("",!0),k.value||w.value?(i(!0),r(g,{key:2},m(_.value,t=>(i(),r("div",{key:t.label},[n("label",{for:t.label},C(t.label),9,me),$(n("input",{"onUpdate:modelValue":o=>t.checked=o,type:"checkbox",id:t.label,onChange:e[2]||(e[2]=o=>R(_.value))},null,40,ye),[[A,t.checked]])]))),128)):D("",!0)]),n("div",{id:"button-container"},[n("button",{onClick:K,class:"btns",style:{"background-color":"cornflowerblue"}},"绘制图片"),n("button",{onClick:N,class:"btns",style:{"background-color":"gray"}},"清空选择"),n("button",{onClick:z,class:"btns"},"下载图片"),n("button",{onClick:H,class:"btns"},"下载答案")])]),n("div",we,[n("canvas",{id:"art-canvas",ref_key:"canvas",ref:d,width:"1000",height:"200"},null,512),n("canvas",{id:"art-canvas-ans",ref_key:"canvas_ans",ref:T,width:"1000",height:"200",style:{display:"none"}},null,512)]),Le],64))}},Me=G(Ue,[["__scopeId","data-v-beaf5baf"]]);export{Me as default};
